<template>
  <div>
    <div class="body-content"><HeadMenu title="IT设备监控列表" :options="options" :search="true" @getValue="searchKey" @getSelectId="selectIdHandle" /></div>
    <el-tabs v-model="activeName" type="card" @tab-click="handleClick">
      <el-tab-pane label="服务器" name="first">
        <v-table :field-arr="fieldArr" :table-setting="serverSetting" @edit="edit" />
      </el-tab-pane>
      <el-tab-pane label="交换机" name="second">
        <v-table :field-arr="switchesFieldArr" :table-setting="switchSetting" @edit="edit" />
      </el-tab-pane>
      <el-tab-pane label="防火墙" name="third">
        <v-table :field-arr="firewallFieldArr" :table-setting="firewallSetting" @edit="edit" />
      </el-tab-pane>
      <el-tab-pane label="存储" name="four">
        <v-table :field-arr="storageFieldArr" :table-setting="storageSetting" @edit="edit" />
      </el-tab-pane>
    </el-tabs>
  </div>
</template>
<script>
export default {
  data () {
    return {
      serverSetting: {
        pagination: {
          show: true,
          rowsPerPage: [5, 10, 20]
        },
        param: {
          page: 1,
          rows: 5,
          sord: 'desc',
          _search: false,
          filters: {
            groupOp: 'AND',
            rules: []
          }
        },
        apiUrl: 'server/list',
        socket: {
          url: 'http://localhost:9999/echo',
          subscribe: 'data',
          tagName: 'id'
        }
      },
      switchSetting: {
        pagination: {
          show: true,
          rowsPerPage: [5, 10, 20]
        },
        param: {
          page: 1,
          rows: 5,
          sord: 'desc',
          _search: false,
          filters: {
            groupOp: 'AND',
            rules: []
          }
        },
        apiUrl: 'interchanger/list',
        socket: {
          url: 'http://localhost:9999/echo',
          subscribe: 'data',
          tagName: 'id'
        }
      },
      firewallSetting: {
        pagination: {
          show: true,
          rowsPerPage: [5, 10, 20]
        },
        param: {
          page: 1,
          rows: 5,
          sord: 'desc',
          _search: false,
          filters: {
            groupOp: 'AND',
            rules: []
          }
        },
        apiUrl: 'interchanger/list',
        socket: {
          url: 'http://localhost:9999/echo',
          subscribe: 'data',
          tagName: 'id'
        }
      },
      storageSetting: {
        pagination: {
          show: true,
          rowsPerPage: [5, 10, 20]
        },
        param: {
          page: 1,
          rows: 5,
          sord: 'desc',
          _search: false,
          filters: {
            groupOp: 'AND',
            rules: []
          }
        },
        apiUrl: 'interchanger/list',
        socket: {
          url: 'http://localhost:9999/echo',
          subscribe: 'data',
          tagName: 'id'
        }
      },
      activeName: 'first',
      options: [{ selectId: '1', label: '锦江监狱' }, { selectId: '2', label: '邑州监狱' }, { selectId: '3', label: '川西监狱' }, { selectId: '4', label: '川北监狱' }, { selectId: '5', label: '雷马屏监狱' }],
      fieldArr: [
        {
          label: '序号',
          key: 'id'
        }, {
          label: '服务器名称',
          key: 'name',
          formatter: ''
        }, {
          label: '运行状态',
          key: 'runstate',
          formatter: [{
            key: 1,
            label: '正常',
            color: '#15B000',
            className: 'iconicon_successfully',
            iconColor: '#15B000'
          }, {
            key: 2,
            label: '异常',
            color: '#f00',
            className: 'iconicon_error-triangle',
            iconColor: '#f00'
          }, {
            key: 3,
            label: '断连',
            color: '#999999',
            className: 'iconicon_power_failure',
            iconColor: '#999999'
          }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }, { text: '断连', value: '3' }]
        }, {
          label: '硬盘状态',
          key: 'diskstate',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }]
        }, {
          label: '风扇状态',
          key: 'fanstate',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }]
        }, {
          label: '内存状态',
          key: 'memorystate',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }]
        }, {
          label: '电源状态',
          key: 'powerstate',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }]
        }, {
          label: 'cpu温度',
          key: 'cpuT',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }]
        }, {
          label: 'cpu负载',
          key: 'cpuLoad',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }]
        }, {
          label: '所在区域',
          key: 'area',
          filters: [{ value: '1', text: '锦江监狱' }, { value: '2', text: '邑州监狱' }, { value: '3', text: '川西监狱' }, { value: '4', text: '川北监狱' }, { value: '5', text: '雷马屏监狱' }]
        }, {
          label: '所在位置',
          key: 'position'
        }, {
          label: '操作',
          key: 'operation',
          width: '200px',
          buttons: [{
            label: '查看详情',
            type: 'url',
            path: '/it_detail?type=1',
            query: ['id', 'name'],
            colorType: 'tableBlue'
          }]
        }
      ]
    }
  },
  computed: {
    switchesFieldArr: function () {
      return [
        {
          label: '序号',
          key: 'id'
        }, {
          label: '交换机名称',
          key: 'name',
          formatter: ''
        }, {
          label: '运行状态',
          key: 'runstate',
          formatter: [{
            key: 1,
            label: '正常',
            color: '#15B000',
            className: 'iconicon_successfully',
            iconColor: '#15B000'
          }, {
            key: 2,
            label: '异常',
            color: '#f00',
            className: 'iconicon_error-triangle',
            iconColor: '#f00'
          }, {
            key: 3,
            label: '断连',
            color: '#999999',
            className: 'iconicon_power_failure',
            iconColor: '#999999'
          }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }, { text: '断连', value: '3' }]
        }, {
          label: '端口数量',
          key: 'portNum'
        }, {
          label: 'cpu负载',
          key: 'cpuLoad',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }]
        }, {
          label: 'cpu利用率',
          key: 'cpuMemory',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }]
        }, {
          label: '所在区域',
          key: 'area',
          filters: [{ value: '1', text: '锦江监狱' }, { value: '2', text: '邑州监狱' }, { value: '3', text: '川西监狱' }, { value: '4', text: '川北监狱' }, { value: '5', text: '雷马屏监狱' }]
        }, {
          label: '所在位置',
          key: 'position'
        }, {
          label: '操作',
          key: 'operation',
          width: '200px',
          buttons: [{
            label: '查看详情',
            type: 'url',
            path: '/it_detail?type=1',
            query: ['id', 'name'],
            colorType: 'tableBlue'
          }]
        }
      ]
    },
    firewallFieldArr: function () {
      return [
        {
          label: '序号',
          key: 'id'
        },
        {
          label: '防火墙主机IP',
          key: 'name'
        }, {
          label: '运行状态',
          key: 'runstate',
          formatter: [{
            key: 1,
            label: '正常',
            color: '#15B000',
            className: 'iconicon_successfully',
            iconColor: '#15B000'
          }, {
            key: 2,
            label: '异常',
            color: '#f00',
            className: 'iconicon_error-triangle',
            iconColor: '#f00'
          }, {
            key: 3,
            label: '断连',
            color: '#999999',
            className: 'iconicon_power_failure',
            iconColor: '#999999'
          }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }, { text: '断连', value: '3' }]
        }, {
          label: '硬盘状态',
          key: 'portNum',
          formatter: '(portNum)TB'
        }, {
          label: 'ping服务器状态',
          key: 'cpuLoad',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }]
        }, {
          label: '内存使用',
          key: 'cpuLoad',
          formatter: '(cpuLoad)G/1TB'
        }, {
          label: '内存利用率',
          key: 'cpuMemory',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }]
        }, {
          label: 'cpu使用率',
          key: 'cpuMemory',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }]
        }, {
          label: '会话状态',
          key: 'cpuLoad',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }]
        }, {
          label: '接口状态',
          key: 'cpuLoad',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }]
        }, {
          label: '流量统计',
          key: 'portNum',
          formatter: '(portNum)m/s'
        }, {
          label: '数据包状态',
          key: 'cpuLoad',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }]
        }, {
          label: '操作',
          key: 'operation',
          width: '200px',
          buttons: [{
            label: '查看详情',
            type: 'url',
            path: '/it_detail?type=1',
            query: ['id', 'name'],
            colorType: 'tableBlue'
          }]
        }
      ]
    },
    storageFieldArr: function () {
      return [
        {
          label: '序号',
          key: 'id'
        },
        {
          label: '存储标识',
          key: 'name'
        }, {
          label: '运行状态',
          key: 'runstate',
          formatter: [{
            key: 1,
            label: '正常',
            color: '#15B000',
            className: 'iconicon_successfully',
            iconColor: '#15B000'
          }, {
            key: 2,
            label: '异常',
            color: '#f00',
            className: 'iconicon_error-triangle',
            iconColor: '#f00'
          }, {
            key: 3,
            label: '断连',
            color: '#999999',
            className: 'iconicon_power_failure',
            iconColor: '#999999'
          }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }, { text: '断连', value: '3' }]
        }, {
          label: '存储大小',
          key: 'portNum',
          formatter: '(portNum)TB'
        }, {
          label: 'cpu负载',
          key: 'cpuLoad',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }]
        }, {
          label: 'cpu利用率',
          key: 'cpuMemory',
          formatter: [{ label: '正常', key: 1 }, { label: '异常', key: 2, color: '#f00' }],
          filters: [{ text: '正常', value: '1' }, { text: '异常', value: '2' }]
        }, {
          label: '所在区域',
          key: 'area',
          filters: [{ value: '1', text: '锦江监狱' }, { value: '2', text: '邑州监狱' }, { value: '3', text: '川西监狱' }, { value: '4', text: '川北监狱' }, { value: '5', text: '雷马屏监狱' }]
        }, {
          label: '所在位置',
          key: 'position'
        }, {
          label: '操作',
          key: 'operation',
          width: '200px',
          buttons: [{
            label: '查看详情',
            type: 'url',
            path: '/it_detail?type=1',
            query: ['id', 'name'],
            colorType: 'tableBlue'
          }]
        }
      ]
    }
  },
  created () {
  },
  methods: {
    edit (data) {
      console.log(data)
    },
    searchKey (val) {
      console.log(val);
    },
    selectIdHandle (id) {
      console.log(id);
    },
    handleClick () {

    }
  }
}
</script>
<style lang="scss">
.publicheader {
  overflow: hidden;
  padding: 10px 0;
  h2 {
    float: left;
  }
  .right-wrapper {
    float: right;
    width: 50%;
    text-align: right;
    .el-input {
      width: 200px;
    }
  }
}
</style>
